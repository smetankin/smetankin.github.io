{"version":3,"sources":["store/reducers/rootReducer.js","store/reducers/weather.js","store/reducers/favorites.js","store/reducers/cityKey.js","components/Header/Header.js","api/helper.js","api/weather.js","store/actions/weather.js","store/actions/cityKey.js","helpers/getCelsium.js","components/Weather/Weather.js","components/Input/Input.js","components/WeatherToday/WeatherToday.js","components/AddToFavorites/AddToFavorites.js","components/MainForm/MainForm.js","store/actions/favorites.js","components/Favorites/Favorites.js","containers/App.js","serviceWorker.js","index.js"],"names":["rootReducer","combineReducers","weather","state","action","type","payload","cityKey","weatherData","favorites","JSON","parse","localStorage","getItem","slice","indexOf","cityName","isCurrent","map","i","Header","className","to","React","Component","makeAPICall","url","options","fetch","then","response","ok","Error","statusText","res","json","API_KEY","getCityKeyByName","name","a","location","firstCity","Key","getWeatherByCityKey","cityInfo","DailyForecasts","weatherFetchDataSuccess","weatherFetchData","dispatch","cityKeyFromLocalStorage","includes","push","setItem","stringify","addCityKey","getWeatherInfoByCityKey","getCelsius","temp","Maximum","Value","Minimum","toFixed","Weather","getDayOfWeek","Date","props","date","getDay","Card","this","status","Input","onSubmit","getWeather","TextField","id","label","margin","placeholder","WeatherToday","console","log","city","AddToFavorites","isCurrentCityInFavorites","Button","onClick","handleRemoveFromFavorites","variant","color","handleAddToFavorites","connect","currentCity","find","MainForm","e","preventDefault","target","elements","value","getWeatherData","match","params","prevProps","prevState","snapshot","history","currentCityWeatherData","currentCityFromRoute","item","Temperature","Day","IconPhrase","length","addToFavorites","removeFromFavorites","currentCityWeatherDataItem","index","key","EpochDate","mapDispatchToProps","favoritesFromLocalStorage","splice","withRouter","Favorites","forEach","favoriteCityNameObject","ck","weatherForCity","App","path","exact","Boolean","window","hostname","store","createStore","composeWithDevTools","applyMiddleware","thunk","logger","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.18587a7d.chunk.js","sourcesContent":["import {combineReducers} from \"redux\";\nimport {weather} from \"./weather\";\nimport {favorites} from \"./favorites\";\nimport {cityKey} from \"./cityKey\"\n\nconst rootReducer = combineReducers({\n    weather, favorites, cityKey\n});\n\nexport default rootReducer;\n","export function weather(state = {}, action) {\n    switch (action.type) {\n        case \"WEATHER_FETCH_DATA_SUCCESS\":\n            return {\n                ...state,\n                [action.payload.cityKey]: action.payload.weatherData\n            }\n        default:\n            return state;\n    }\n}\n","export function favorites(state = JSON.parse(localStorage.getItem('favorites')) || [], action) {\n    switch (action.type) {\n        case \"ADD_TO_FAVORITES\":\n            return [...state, action.payload];\n        case \"REMOVE_FROM_FAVORITES\":\n            return [\n                ...state.slice(0, state.indexOf(action.payload)),\n                ...state.slice(state.indexOf(action.payload) + 1)\n            ];\n        default:\n            return state;\n    }\n}\n","export function cityKey(state = [{cityKey: \"215854\", cityName: \"Tel Aviv\", isCurrent: true}, ...(JSON.parse(localStorage.getItem('cityKey')) || [])], action) {\n    switch (action.type) {\n        case \"ADD_CITY_KEY\":\n            return [...(state.map(i => ({...i, isCurrent: false}))), { ...action.payload, isCurrent: true }];\n        default:\n            return state;\n    }\n}\n","import React from 'react';\nimport \"./header.css\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nclass Header extends React.Component{\n    render() {\n        return(\n            <header className={\"header\"}>\n                <div className=\"header-title\">\n                    Herolo Weather task\n                </div>\n                <div className=\"nav\">\n\n                    <Link to=\"/\">Home</Link>\n                    <Link to=\"/favorites\">Favorites</Link>\n\n                </div>\n            </header>\n        );\n    }\n}\nexport default Header;\n","export const makeAPICall = (url, options = {}) =>\n    fetch(url, options)\n        .then(response =>{\n            if(!response.ok){\n                throw  new Error(response.statusText)\n            }\n            return response;\n        }).then(res => res.json());\n","import { makeAPICall } from './helper';\n\nconst API_KEY = 'UD4SCAX3zLfke0bHjEDBBzaHNKSWBYs0';\n\nexport const getCityKeyByName = async (name) =>{\n\n    const location = await makeAPICall(`http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=${API_KEY}&q=${name}`);\n\n    const firstCity = location[0];\n    if (!firstCity) {\n        return null\n    }\n    return firstCity.Key;\n};\n\nexport const getWeatherByCityKey = async (cityKey) =>{\n    const cityInfo = await makeAPICall(`http://dataservice.accuweather.com/forecasts/v1/daily/5day/${cityKey}?apikey=${API_KEY}`);\n    return cityInfo.DailyForecasts;\n};\n\nexport const getWeatherInfoByCity = async (cityName) =>{\n    const cityKey = await getCityKeyByName(cityName);\n    const cityInfo = await makeAPICall(`http://dataservice.accuweather.com/forecasts/v1/daily/5day/${cityKey}?apikey=${API_KEY}`);\n    return cityInfo.DailyForecasts;\n};\n","import { getCityKeyByName, getWeatherInfoByCity, getWeatherByCityKey } from '../../api/weather'\nimport {addCityKey} from \"../actions/cityKey\"\n\nexport function weatherFetchDataSuccess(weather){\n    return{\n        type : \"WEATHER_FETCH_DATA_SUCCESS\",\n        payload: weather\n    }\n}\n\nexport function weatherFetchData(name) {\n    return(dispatch) => {\n        getCityKeyByName(name)\n            .then((cityKey) => {\n                if (!cityKey) {\n                    return\n                }\n                dispatch(addCityKey({cityKey, cityName: name}))\n                getWeatherByCityKey(cityKey)\n                    .then(weather => dispatch(weatherFetchDataSuccess({ cityKey, weatherData: weather} )))\n            })\n    }\n}\n\nexport  function getWeatherInfoByCityKey(cityKey) {\n    return(dispatch) => {\n        getWeatherByCityKey(cityKey)\n            .then(weather => dispatch(weatherFetchDataSuccess({ cityKey, weatherData: weather} )))\n    }\n}\n","export function addCityKey(cityKey){\n    const cityKeyFromLocalStorage = JSON.parse(localStorage.getItem('cityKey')) || [];\n    if(!cityKeyFromLocalStorage.includes(cityKey)) {\n        cityKeyFromLocalStorage.push(cityKey);\n        localStorage.setItem('cityKey', JSON.stringify(cityKeyFromLocalStorage));\n    }\n    return{\n        type : \"ADD_CITY_KEY\",\n        payload: cityKey\n    }\n}\n","export const getCelsius = (temp) =>{\n    const farenheit = (temp.Maximum.Value + temp.Minimum.Value)/2;\n    const celsium = ((farenheit - 32)*5)/9;\n    return celsium.toFixed(0);\n}\n","import React from 'react';\nimport {getCelsius} from \"../../helpers/getCelsium\";\nimport \"./weather.css\"\n\nimport Card from '@material-ui/core/Card';\n\nclass  Weather extends React.Component{\n    getDayOfWeek = () =>{\n        const daysOfWeek = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\" ,\"Saturday\"];\n        const date = new Date(this.props.date*1000);\n        const day = date.getDay();\n        return daysOfWeek[day];\n    };\n\n    render() {\n        return(\n            <Card>\n                <div className=\"weather-block\">\n                    <div>\n                        {this.getDayOfWeek()}\n                    </div>\n                    <div>\n                        {this.props.status}\n                    </div>\n                    <div>\n                        {getCelsius(this.props.temp)}°C\n                    </div>\n                </div>\n            </Card>\n        )\n    }\n\n}\n\nexport default Weather;\n","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nclass Input extends React.Component{\n    render() {\n        return(\n            <form onSubmit={this.props.getWeather}>\n                <TextField\n                    id=\"standard-basic\"\n                    label=\"City\"\n                    margin=\"normal\" type={'text'} name={'city'} placeholder={'Weather'}\n                />\n            </form>\n        )\n    }\n}\nexport default Input;\n","import React from \"react\";\nimport {getCelsius} from \"../../helpers/getCelsium\";\nimport \"./weatherToday.css\"\n\nclass  WeatherToday extends React.Component{\n\n    render() {\n        console.log(\"props\" , this.props);\n        return(\n            <div>\n                <div className=\"city-name\">\n                    {this.props.city}\n                </div>\n                <div className=\"temperature-today\">\n                    {this.props.temp != null ? getCelsius(this.props.temp) : null}°C\n                </div>\n                <div className=\"status-today\">\n                    {this.props.status}\n                </div>\n            </div>\n        );\n    }\n}\nexport default WeatherToday\n","import React from \"react\"\n\nimport Button from '@material-ui/core/Button';\nimport {connect} from \"react-redux\";\n\nclass  AddToFavorites extends React.Component{\n\n\n\n    render() {\n        return(\n            <div>\n                {\n                    this.props.isCurrentCityInFavorites ?\n                        <Button onClick={this.props.handleRemoveFromFavorites} variant=\"contained\" color=\"secondary\"> Remove from favorites </Button>\n                        : <Button onClick={this.props.handleAddToFavorites} variant=\"contained\" color=\"secondary\"> Add to favorites </Button>\n\n                }\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return{\n        weather: state.weather,\n        currentCity: state.cityKey.find(city =>city.isCurrent),\n        favorites: state.favorites,\n        cityKey: state.cityKey\n    };\n};\n\nexport default connect(mapStateToProps)(AddToFavorites);\n","import React from \"react\";\nimport { withRouter } from 'react-router-dom'\n\nimport \"./mainForm.css\"\n\nimport {connect} from \"react-redux\";\n\nimport {addToFavorites, removeFromFavorites} from \"../../store/actions/favorites\"\nimport {weatherFetchData} from \"../../store/actions/weather\";\nimport {getWeatherInfoByCityKey} from \"../../store/actions/weather\";\n\nimport Weather from \"../Weather\";\nimport Input from \"../Input\";\nimport WeatherToday from \"../WeatherToday\";\nimport AddToFavorites from \"../AddToFavorites\";\n\nclass  MainForm extends React.Component{\n\n    componentDidMount() {\n        (this.props.match.params.cityKey)?\n            this.props.getWeatherInfoByCityKey(this.props.match.params.cityKey)\n            : this.props.getWeatherInfoByCityKey(\"215854\");\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.currentCity && prevProps.currentCity.cityKey !== this.props.currentCity.cityKey) {\n            this.props.history.push(`/${this.props.currentCity.cityKey}`);\n        }\n    }\n\n    getWeather = (e) =>{\n        e.preventDefault();\n        const city = e.target.elements.city.value;\n        this.props.getWeatherData(city);\n    };\n\n    render() {\n        const currentCityWeatherData = this.props.currentCity ? this.props.weather[this.props.match.params.cityKey || this.props.currentCity.cityKey] : null;\n\n        if(currentCityWeatherData && this.props.currentCity){\n            const currentCityFromRoute = this.props.cityKey.find(item => item.cityKey === this.props.match.params.cityKey)\n            const cityName = currentCityFromRoute ? currentCityFromRoute.cityName : this.props.currentCity.cityName;\n\n            return(\n                <div>\n\n                    <Input getWeather = {this.getWeather}/>\n                    <div className=\"weather-today-favorite\">\n                        <WeatherToday\n                            city = {cityName}\n                            temp = {currentCityWeatherData[0].Temperature}\n                            status = {currentCityWeatherData[0].Day.IconPhrase}\n                        />\n                        <AddToFavorites\n                            isCurrentCityInFavorites={this.props.favorites.includes(this.props.currentCity.cityKey)}\n                            handleAddToFavorites={() =>\n                                this.props.favorites.length == 0 ?\n                                    this.props.addToFavorites(this.props.currentCity.cityKey)\n                                        : this.props.favorites.indexOf(this.props.currentCity.cityKey) >=0 ?\n                                            null\n                                            : this.props.addToFavorites(this.props.currentCity.cityKey)\n\n                            }\n                            handleRemoveFromFavorites={() =>\n                                this.props.favorites.length != 0 ?\n                                    this.props.removeFromFavorites(this.props.currentCity.cityKey)\n                                        :null\n                            }\n                        />\n                    </div>\n                    <div className={\"weather-container\"}>\n                    {\n                        (currentCityWeatherData ?\n                            (currentCityWeatherData.map((currentCityWeatherDataItem, index) => (\n                                    <Weather\n                                        key={index}\n                                        date={currentCityWeatherDataItem.EpochDate}\n                                        temp={currentCityWeatherDataItem.Temperature}\n                                        status={currentCityWeatherDataItem.Day.IconPhrase}\n                                    />\n                                )\n                            )) :null)\n                    }\n                    </div>\n                </div>\n            )\n        }\n        return null\n\n\n    }\n}\nconst mapStateToProps = state => {\n  return{\n    weather: state.weather,\n    currentCity: state.cityKey.find(city =>city.isCurrent),\n    favorites: state.favorites,\n    cityKey: state.cityKey\n  };\n};\n\nconst  mapDispatchToProps = {\n    getWeatherInfoByCityKey: (key) => getWeatherInfoByCityKey(key),\n    getWeatherData: (name) => weatherFetchData(name),\n    addToFavorites:  addToFavorites,\n    removeFromFavorites: removeFromFavorites,\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(MainForm));\n","\nexport function addToFavorites(cityKey){\n    const favoritesFromLocalStorage = JSON.parse(localStorage.getItem('favorites')) || [];\n    if (!favoritesFromLocalStorage.includes(cityKey)) {\n        favoritesFromLocalStorage.push(cityKey);\n        localStorage.setItem('favorites', JSON.stringify(favoritesFromLocalStorage));\n    }\n\n    return {\n        type : \"ADD_TO_FAVORITES\",\n        payload: cityKey\n    }\n}\nexport function removeFromFavorites(cityKey){\n    const favoritesFromLocalStorage = JSON.parse(localStorage.getItem('favorites')) || [];\n    if (favoritesFromLocalStorage.includes(cityKey)) {\n\n        favoritesFromLocalStorage.splice(favoritesFromLocalStorage.indexOf(cityKey), 1);\n        localStorage.setItem('favorites', JSON.stringify(favoritesFromLocalStorage));\n    }\n    return{\n        type : \"REMOVE_FROM_FAVORITES\",\n        payload: cityKey\n    }\n}\n","import React from \"react\"\nimport { Link } from 'react-router-dom'\n\nimport Card from '@material-ui/core/Card';\nimport \"./favorites.css\"\nimport {connect} from \"react-redux\";\nimport {getCelsius} from \"../../helpers/getCelsium\";\nimport {getWeatherInfoByCityKey} from \"../../store/actions/weather\";\n\nclass Favorites  extends React.Component{\n\n    componentDidMount() {\n        // console.log('mounted', this.props)\n        this.props.favorites.forEach((item) =>\n            this.props.getWeatherInfoByCityKey(item)\n        );\n        console.log(\"favorites:\",this.props.favorites)\n    }\n\n    render() {\n        return(\n            <div>\n                <div className=\"title\">\n                    Favorites:\n                </div>\n                <div className=\"favorite-items\">\n                    {\n                        // this.props.favorites.length >0 ?\n                        this.props.favorites.map((item, index) =>{\n                            const favoriteCityNameObject = this.props.cityKey.find(ck => ck.cityKey === item);\n                            const weatherForCity = this.props.weather[item];\n\n                            if (!favoriteCityNameObject || !weatherForCity) {\n                                return null;\n                            }\n\n                            return (\n                                <div key={index} className={\"favorite-card\"}>\n                                    <Link  to={`/${favoriteCityNameObject.cityKey}`}>\n                                        <Card>\n                                            <div className={\"city\"}>{favoriteCityNameObject.cityName}</div>\n                                            <div className={\"temperature\"}>{getCelsius(weatherForCity[0].Temperature)}°C</div>\n                                            <div className={\"status\"}>{this.props.weather[item][0].Day.IconPhrase}</div>\n                                        </Card>\n                                    </Link>\n                                </div>\n                                )\n\n                            }\n                        )\n                    }\n                </div>\n                <div>\n                </div>\n            </div>\n        )\n    }\n\n}\n\nconst  mapDispatchToProps = {\n    getWeatherInfoByCityKey: getWeatherInfoByCityKey\n};\n\nconst mapStateToProps = (state) => {\n return  {\n     favorites: state.favorites,\n     weather: state.weather,\n     cityKey: state.cityKey\n }\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites);\n","import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nimport './App.css';\nimport Header from \"../components/Header\"\nimport MainForm from \"../components/MainForm\";\nimport Favorites from \"../components/Favorites\";\n\nconst API_KEY = 'rXX6gRAGas7dEvJyz21j3Z6pWMRKaJnk';\n\nclass App extends React.Component{\n\n\n  render() {\n    return(\n        <div className={\"App\"}>\n            <Router>\n                <Header />\n                <Switch>\n                    <Route path=\"/favorites\">\n                        <Favorites />\n                    </Route>\n                    <Route exact path=\"/:cityKey?\">\n                        <MainForm />\n                    </Route>\n                </Switch>\n            </Router>\n        </div>\n    );\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from \"react-redux\";\nimport {createStore, applyMiddleware} from \"redux\";\nimport thunk from \"redux-thunk\";\nimport {composeWithDevTools} from \"redux-devtools-extension\";\nimport rootReducer from \"./store/reducers/rootReducer\";\nimport logger from 'redux-logger';\n\nimport './index.css';\nimport App from './containers/App';\nimport * as serviceWorker from './serviceWorker';\n\n\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk, logger))\n);\n\n\nReactDOM.render(\n    <Provider store={store}>\n    <App />\n    </Provider>, document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}