(this["webpackJsonpherolo-weather"]=this["webpackJsonpherolo-weather"]||[]).push([[0],{59:function(e,t,r){e.exports=r(77)},68:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){},72:function(e,t,r){},74:function(e,t,r){},75:function(e,t,r){},76:function(e,t,r){},77:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(6),i=r.n(c),o=r(27),s=r(25),u=r(49),l=r(50),p=r(19);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var f=r(17);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=Object(s.combineReducers)({weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WEATHER_FETCH_DATA_SUCCESS":return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(r,!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,Object(p.a)({},t.payload.cityKey,t.payload.weatherData));default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JSON.parse(localStorage.getItem("favorites"))||[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_FAVORITES":return[].concat(Object(f.a)(e),[t.payload]);case"REMOVE_FROM_FAVORITES":return[].concat(Object(f.a)(e.slice(0,e.indexOf(t.payload))),Object(f.a)(e.slice(e.indexOf(t.payload)+1)));default:return e}},cityKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{cityKey:"215854",cityName:"Tel Aviv",isCurrent:!0}].concat(Object(f.a)(JSON.parse(localStorage.getItem("cityKey"))||[])),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CITY_KEY":return[].concat(Object(f.a)(e.map((function(e){return m({},e,{isCurrent:!1})}))),[m({},t.payload,{isCurrent:!0})]);default:return e}}}),d=r(51),O=r.n(d),b=(r(68),r(12)),j=r(7),E=r(14),g=r(15),w=r(16),C=r(26),K=r(30),D=(r(69),r(70),function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"header-title"},"Herolo Weather task"),n.a.createElement("div",{className:"nav"},n.a.createElement(C.b,{to:"/"},"Home"),n.a.createElement(C.b,{to:"/favorites"},"Favorites")))}}]),t}(n.a.Component));r(72);var S=r(35),k=r.n(S),N=r(39),F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e})).then((function(e){return e.json()}))},T="rXX6gRAGas7dEvJyz21j3Z6pWMRKaJnk",I=function(){var e=Object(N.a)(k.a.mark((function e(t){var r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(T,"&q=").concat(t));case 2:if(r=e.sent,a=r[0]){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",a.Key);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(N.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=").concat(T));case 2:return r=e.sent,e.abrupt("return",r.DailyForecasts);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function W(e){return{type:"WEATHER_FETCH_DATA_SUCCESS",payload:e}}function P(e){return function(t){I(e).then((function(r){r&&(t(function(e){var t=JSON.parse(localStorage.getItem("cityKey"))||[];return t.includes(e)||(t.push(e),localStorage.setItem("cityKey",JSON.stringify(t))),{type:"ADD_CITY_KEY",payload:e}}({cityKey:r,cityName:e})),A(r).then((function(e){return t(W({cityKey:r,weatherData:e}))})))}))}}function _(e){return function(t){A(e).then((function(r){return t(W({cityKey:e,weatherData:r}))}))}}var R=function(e){return(5*((e.Maximum.Value+e.Minimum.Value)/2-32)/9).toFixed(0)},x=(r(74),r(105)),J=function(e){function t(){var e,r;Object(b.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).getDayOfWeek=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(1e3*r.props.date).getDay()]},r}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return n.a.createElement(x.a,null,n.a.createElement("div",{className:"weather-block"},n.a.createElement("div",null,this.getDayOfWeek()),n.a.createElement("div",null,this.props.status),n.a.createElement("div",null,R(this.props.temp),"\xb0C")))}}]),t}(n.a.Component),M=r(109),V=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{onSubmit:this.props.getWeather},n.a.createElement(M.a,{id:"standard-basic",label:"City",margin:"normal",type:"text",name:"city",placeholder:"Weather"}))}}]),t}(n.a.Component),B=(r(75),function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return console.log("props",this.props),n.a.createElement("div",null,n.a.createElement("div",{className:"city-name"},this.props.city),n.a.createElement("div",{className:"temperature-today"},null!=this.props.temp?R(this.props.temp):null,"\xb0C"),n.a.createElement("div",{className:"status-today"},this.props.status))}}]),t}(n.a.Component)),H=r(110),Y=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,this.props.isCurrentCityInFavorites?n.a.createElement(H.a,{onClick:this.props.handleRemoveFromFavorites,variant:"contained",color:"secondary"}," Remove from favorites "):n.a.createElement(H.a,{onClick:this.props.handleAddToFavorites,variant:"contained",color:"secondary"}," Add to favorites "))}}]),t}(n.a.Component),U=Object(o.b)((function(e){return{weather:e.weather,currentCity:e.cityKey.find((function(e){return e.isCurrent})),favorites:e.favorites,cityKey:e.cityKey}}))(Y),X=function(e){function t(){var e,r;Object(b.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).getWeather=function(e){e.preventDefault();var t=e.target.elements.city.value;r.props.getWeatherData(t)},r}return Object(w.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.cityKey?this.props.getWeatherInfoByCityKey(this.props.match.params.cityKey):this.props.getWeatherInfoByCityKey("215854")}},{key:"componentDidUpdate",value:function(e,t,r){this.props.currentCity&&e.currentCity.cityKey!==this.props.currentCity.cityKey&&this.props.history.push("/".concat(this.props.currentCity.cityKey))}},{key:"render",value:function(){var e=this,t=this.props.currentCity?this.props.weather[this.props.match.params.cityKey||this.props.currentCity.cityKey]:null;if(t&&this.props.currentCity){var r=this.props.cityKey.find((function(t){return t.cityKey===e.props.match.params.cityKey})),a=r?r.cityName:this.props.currentCity.cityName;return n.a.createElement("div",null,n.a.createElement(V,{getWeather:this.getWeather}),n.a.createElement("div",{className:"weather-today-favorite"},n.a.createElement(B,{city:a,temp:t[0].Temperature,status:t[0].Day.IconPhrase}),n.a.createElement(U,{isCurrentCityInFavorites:this.props.favorites.includes(this.props.currentCity.cityKey),handleAddToFavorites:function(){return 0==e.props.favorites.length?e.props.addToFavorites(e.props.currentCity.cityKey):e.props.favorites.indexOf(e.props.currentCity.cityKey)>=0?null:e.props.addToFavorites(e.props.currentCity.cityKey)},handleRemoveFromFavorites:function(){return 0!=e.props.favorites.length?e.props.removeFromFavorites(e.props.currentCity.cityKey):null}})),n.a.createElement("div",{className:"weather-container"},t?t.map((function(e,t){return n.a.createElement(J,{key:t,date:e.EpochDate,temp:e.Temperature,status:e.Day.IconPhrase})})):null))}return null}}]),t}(n.a.Component),q={getWeatherInfoByCityKey:function(e){return _(e)},getWeatherData:function(e){return P(e)},addToFavorites:function(e){var t=JSON.parse(localStorage.getItem("favorites"))||[];return t.includes(e)||(t.push(e),localStorage.setItem("favorites",JSON.stringify(t))),{type:"ADD_TO_FAVORITES",payload:e}},removeFromFavorites:function(e){var t=JSON.parse(localStorage.getItem("favorites"))||[];return t.includes(e)&&(t.splice(t.indexOf(e),1),localStorage.setItem("favorites",JSON.stringify(t))),{type:"REMOVE_FROM_FAVORITES",payload:e}}},z=Object(o.b)((function(e){return{weather:e.weather,currentCity:e.cityKey.find((function(e){return e.isCurrent})),favorites:e.favorites,cityKey:e.cityKey}}),q)(Object(K.f)(X)),G=(r(76),function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.favorites.forEach((function(t){return e.props.getWeatherInfoByCityKey(t)})),console.log("favorites:",this.props.favorites)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"title"},"Favorites:"),n.a.createElement("div",{className:"favorite-items"},this.props.favorites.map((function(t,r){var a=e.props.cityKey.find((function(e){return e.cityKey===t})),c=e.props.weather[t];return a&&c?n.a.createElement("div",{key:r,className:"favorite-card"},n.a.createElement(C.b,{to:"/".concat(a.cityKey)},n.a.createElement(x.a,null,n.a.createElement("div",{className:"city"},a.cityName),n.a.createElement("div",{className:"temperature"},R(c[0].Temperature),"\xb0C"),n.a.createElement("div",{className:"status"},e.props.weather[t][0].Day.IconPhrase)))):null}))),n.a.createElement("div",null))}}]),t}(n.a.Component)),Z={getWeatherInfoByCityKey:_},$=Object(o.b)((function(e){return{favorites:e.favorites,weather:e.weather,cityKey:e.cityKey}}),Z)(G),L=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(C.a,null,n.a.createElement(D,null),n.a.createElement(K.c,null,n.a.createElement(K.a,{path:"/favorites"},n.a.createElement($,null)),n.a.createElement(K.a,{exact:!0,path:"/:cityKey?"},n.a.createElement(z,null)))))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=Object(s.createStore)(v,Object(l.composeWithDevTools)(Object(s.applyMiddleware)(u.a,O.a)));i.a.render(n.a.createElement(o.a,{store:Q},n.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[59,1,2]]]);
//# sourceMappingURL=main.3a429464.chunk.js.map