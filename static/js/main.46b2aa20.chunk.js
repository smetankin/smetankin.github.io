(this["webpackJsonpherolo-weather"]=this["webpackJsonpherolo-weather"]||[]).push([[0],{68:function(e,t,r){e.exports=r(87)},77:function(e,t,r){},78:function(e,t,r){},79:function(e,t,r){},81:function(e,t,r){},83:function(e,t,r){},84:function(e,t,r){},85:function(e,t,r){},86:function(e,t,r){},87:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(9),i=r.n(c),o=r(31),s=r(29),u=r(55),l=r(56),p=r(12);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var f=r(13);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=Object(s.combineReducers)({weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WEATHER_FETCH_DATA_SUCCESS":return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(r,!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,Object(p.a)({},t.payload.cityKey,t.payload.weatherData));default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JSON.parse(localStorage.getItem("favorites"))||[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_FAVORITES":return[].concat(Object(f.a)(e),[t.payload]);case"REMOVE_FROM_FAVORITES":return[].concat(Object(f.a)(e.slice(0,e.indexOf(t.payload))),Object(f.a)(e.slice(e.indexOf(t.payload)+1)));default:return e}},cityKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{cityKey:"215854",cityName:"Tel Aviv",isCurrent:!0}].concat(Object(f.a)(JSON.parse(localStorage.getItem("cityKey"))||[])),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CITY_KEY":return[].concat(Object(f.a)(e.map((function(e){return h({},e,{isCurrent:!1})}))),[h({},t.payload,{isCurrent:!0})]);default:return e}}}),d=r(57),O=r.n(d),b=(r(77),r(18)),E=r(15),g=r(20),j=r(21),w=r(22),C=r(30),K=r(34);r(78),r(79);var D=function(){return n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"header-title"},"Herolo Weather task"),n.a.createElement("div",{className:"nav"},n.a.createElement(C.b,{to:"/"},"Home"),n.a.createElement(C.b,{to:"/favorites"},"Favorites")))};r(81);var N=r(27),S=r.n(N),T=r(39),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e})).then((function(e){return e.json()}))},A="UD4SCAX3zLfke0bHjEDBBzaHNKSWBYs0",F=function(){var e=Object(T.a)(S.a.mark((function e(t){var r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(A,"&q=").concat(t));case 2:if(r=e.sent,a=r[0]){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",a.Key);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(T.a)(S.a.mark((function e(t){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=").concat(A));case 2:return r=e.sent,e.abrupt("return",r.DailyForecasts);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(T.a)(S.a.mark((function e(t){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(A,"&q=").concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function P(e){return{type:"WEATHER_FETCH_DATA_SUCCESS",payload:e}}function R(e){return function(t){F(e).then((function(r){r&&(t(function(e){var t=JSON.parse(localStorage.getItem("cityKey"))||[];return t.includes(e)||(t.push(e),localStorage.setItem("cityKey",JSON.stringify(t))),{type:"ADD_CITY_KEY",payload:e}}({cityKey:r,cityName:e})),I(r).then((function(e){return t(P({cityKey:r,weatherData:e}))})))}))}}function _(e){return function(t){I(e).then((function(r){return t(P({cityKey:e,weatherData:r}))}))}}var x=function(e){return(5*((e.Maximum.Value+e.Minimum.Value)/2-32)/9).toFixed(0)},B=(r(83),r(122)),J=function(e){function t(){var e,r;Object(b.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(n)))).getDayOfWeek=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(1e3*r.props.date).getDay()]},r}return Object(w.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return n.a.createElement(B.a,null,n.a.createElement("div",{className:"weather-block"},n.a.createElement("div",null,this.getDayOfWeek()),n.a.createElement("div",null,this.props.status),n.a.createElement("div",null,x(this.props.temp),"\xb0C")))}}]),t}(n.a.Component),M=(r(84),r(128)),H=r(129),V=function(e){function t(){var e,r;Object(b.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(n)))).state={citiesAutocompleteList:[]},r.citiesAutocompleteRequestTimeout=null,r.handleInputChange=function(e){r.citiesAutocompleteRequestTimeout||(r.citiesAutocompleteRequestTimeout=setTimeout((function(){return r.citiesAutocompleteRequestTimeout=null}),1e3),W(e.target.value).then((function(e){e&&r.setState({citiesAutocompleteList:e.map((function(e){return{cityName:e.LocalizedName,cityKey:e.Key}}))})})))},r}return Object(w.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(H.a,{className:"main-input",options:this.state.citiesAutocompleteList,getOptionLabel:function(e){return e.cityName},onChange:function(t,r){r&&r.cityName&&e.props.getWeather(r.cityName)},style:{width:300},renderInput:function(t){return n.a.createElement(M.a,Object.assign({},t,{onChange:e.handleInputChange,label:"City",variant:"outlined",fullWidth:!0,name:"city"}))}})}}]),t}(a.Component);r(85);var q=function(e){return n.a.createElement("div",null,n.a.createElement("div",{className:"city-name"},e.city),n.a.createElement("div",{className:"temperature-today"},null!=e.temp?x(e.temp):null,"\xb0C"),n.a.createElement("div",{className:"status-today"},e.status))},L=r(127);var Y=Object(o.b)((function(e){return{weather:e.weather,currentCity:e.cityKey.find((function(e){return e.isCurrent})),favorites:e.favorites,cityKey:e.cityKey}}))((function(e){return n.a.createElement("div",null,e.isCurrentCityInFavorites?n.a.createElement(L.a,{onClick:e.handleRemoveFromFavorites,variant:"contained",color:"secondary"}," Remove from favorites "):n.a.createElement(L.a,{onClick:e.handleAddToFavorites,variant:"contained",color:"secondary"}," Add to favorites "))})),U=function(e){function t(){var e,r;Object(b.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(n)))).getWeather=function(e){r.props.getWeatherData(e)},r}return Object(w.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.cityKey?this.props.getWeatherInfoByCityKey(this.props.match.params.cityKey):this.props.getWeatherInfoByCityKey("215854")}},{key:"componentDidUpdate",value:function(e,t,r){this.props.currentCity&&e.currentCity.cityKey!==this.props.currentCity.cityKey&&this.props.history.push("/".concat(this.props.currentCity.cityKey))}},{key:"render",value:function(){var e=this,t=this.props.currentCity?this.props.weather[this.props.match.params.cityKey||this.props.currentCity.cityKey]:null;if(t&&this.props.currentCity){var r=this.props.cityKey.find((function(t){return t.cityKey===e.props.match.params.cityKey})),a=r?r.cityName:this.props.currentCity.cityName;return n.a.createElement("div",null,n.a.createElement(V,{getWeather:this.getWeather}),n.a.createElement("div",{className:"weather-today-favorite"},n.a.createElement(q,{city:a,temp:t[0].Temperature,status:t[0].Day.IconPhrase}),n.a.createElement(Y,{isCurrentCityInFavorites:this.props.favorites.includes(this.props.currentCity.cityKey),handleAddToFavorites:function(){return 0==e.props.favorites.length?e.props.addToFavorites(e.props.currentCity.cityKey):e.props.favorites.indexOf(e.props.currentCity.cityKey)>=0?null:e.props.addToFavorites(e.props.currentCity.cityKey)},handleRemoveFromFavorites:function(){return 0!=e.props.favorites.length?e.props.removeFromFavorites(e.props.currentCity.cityKey):null}})),n.a.createElement("div",{className:"weather-container"},t?t.map((function(e,t){return n.a.createElement(J,{key:t,date:e.EpochDate,temp:e.Temperature,status:e.Day.IconPhrase})})):null))}return null}}]),t}(n.a.Component),z={getWeatherInfoByCityKey:function(e){return _(e)},getWeatherData:function(e){return R(e)},addToFavorites:function(e){var t=JSON.parse(localStorage.getItem("favorites"))||[];return t.includes(e)||(t.push(e),localStorage.setItem("favorites",JSON.stringify(t))),{type:"ADD_TO_FAVORITES",payload:e}},removeFromFavorites:function(e){var t=JSON.parse(localStorage.getItem("favorites"))||[];return t.includes(e)&&(t.splice(t.indexOf(e),1),localStorage.setItem("favorites",JSON.stringify(t))),{type:"REMOVE_FROM_FAVORITES",payload:e}}},X=Object(o.b)((function(e){return{weather:e.weather,currentCity:e.cityKey.find((function(e){return e.isCurrent})),favorites:e.favorites,cityKey:e.cityKey}}),z)(Object(K.f)(U)),$=(r(86),function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.favorites.forEach((function(t){return e.props.getWeatherInfoByCityKey(t)}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"title"},"Favorites:"),n.a.createElement("div",{className:"favorite-items"},this.props.favorites.map((function(t,r){var a=e.props.cityKey.find((function(e){return e.cityKey===t})),c=e.props.weather[t];return a&&c?n.a.createElement("div",{key:r,className:"favorite-card"},n.a.createElement(C.b,{to:"/".concat(a.cityKey)},n.a.createElement(B.a,null,n.a.createElement("div",{className:"city"},a.cityName),n.a.createElement("div",{className:"temperature"},x(c[0].Temperature),"\xb0C"),n.a.createElement("div",{className:"status"},e.props.weather[t][0].Day.IconPhrase)))):null}))),n.a.createElement("div",null))}}]),t}(n.a.Component)),G={getWeatherInfoByCityKey:_},Q=Object(o.b)((function(e){return{favorites:e.favorites,weather:e.weather,cityKey:e.cityKey}}),G)($),Z=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(C.a,null,n.a.createElement(D,null),n.a.createElement(K.c,null,n.a.createElement(K.a,{path:"/favorites"},n.a.createElement(Q,null)),n.a.createElement(K.a,{exact:!0,path:"/:cityKey?"},n.a.createElement(X,null)))))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=Object(s.createStore)(v,Object(l.composeWithDevTools)(Object(s.applyMiddleware)(u.a,O.a)));i.a.render(n.a.createElement(o.a,{store:ee},n.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[68,1,2]]]);
//# sourceMappingURL=main.46b2aa20.chunk.js.map